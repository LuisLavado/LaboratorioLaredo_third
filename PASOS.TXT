â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    PASOS PARA DESPLEGAR CON DOCKER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ PREREQUISITOS:
   - Docker Desktop instalado y corriendo
   - Git Bash o PowerShell
   - Archivo .env configurado en la raÃ­z del proyecto

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ PRIMER DESPLIEGUE (Primera vez)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. CONFIGURAR .ENV:
   - Copiar .env.example a .env (si no existe)
   - Verificar credenciales de base de datos:
     DB_CONNECTION=mysql
     DB_HOST=mysql
     DB_PORT=3306
     DB_DATABASE=laboratoriolaredo
     DB_USERNAME=root
     DB_PASSWORD=root
   
   - Verificar configuraciÃ³n de Reverb/WebSocket:
     BROADCAST_CONNECTION=reverb
     REVERB_APP_ID=176084
     REVERB_APP_KEY=ynws9ha5gsf0proyy0vk
     REVERB_APP_SECRET=zitcbbtxs6zljlzhmrfy
     REVERB_HOST="0.0.0.0"
     REVERB_PORT=8080
     REVERB_SCHEME=http

2. CONSTRUIR IMÃGENES (primera vez o despuÃ©s de cambios en Dockerfile):
   docker-compose build --no-cache

   â±ï¸  Esto toma 5-10 minutos. Construye:
   - Contenedor MySQL (base de datos)
   - Contenedor Backend (PHP + Apache + Laravel + Reverb)
   - Contenedor Frontend (React + Nginx)

3. LEVANTAR CONTENEDORES:
   docker-compose up -d

   âœ… Esto inicia:
   - mysql: Base de datos en puerto 3306
   - backend: API Laravel (8000) + WebSocket Reverb (8080)
   - frontend: React app en puerto 5173

4. VERIFICAR QUE ESTÃ‰N CORRIENDO:
   docker-compose ps

   Debe mostrar 3 servicios "Up":
   - laboratoriolaredo-mysql-1
   - laboratoriolaredo-backend-1
   - laboratoriolaredo-frontend-1

5. DAR PERMISOS DE ESCRITURA (PowerShell):
   docker-compose exec backend chown -R www-data:www-data /var/www/html/storage /var/www/html/bootstrap/cache
   docker-compose exec backend chmod -R 775 /var/www/html/storage /var/www/html/bootstrap/cache

6. EJECUTAR MIGRACIONES Y SEEDERS:
   docker-compose exec backend php artisan migrate --seed

   âš ï¸  Si hay error "database doesn't exist", espera 30 segundos y reintenta.
       MySQL tarda en inicializarse la primera vez.

7. GENERAR KEY DE APLICACIÃ“N:
   docker-compose exec backend php artisan key:generate

8. LIMPIAR CACHÃ‰:
   docker-compose exec backend php artisan config:clear
   docker-compose exec backend php artisan cache:clear
   docker-compose exec backend php artisan route:clear
   docker-compose exec backend php artisan optimize:clear

9. CREAR STORAGE LINKS:
   docker-compose exec backend php artisan storage:link

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”„ DESPLIEGUES POSTERIORES (Ya existe todo)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. LEVANTAR CONTENEDORES:
   docker-compose up -d

2. SI CAMBIASTE CÃ“DIGO PHP:
   docker-compose restart backend

3. SI CAMBIASTE .ENV O docker-compose.yml:
   docker-compose down
   docker-compose up -d

4. SI CAMBIASTE Dockerfile o package.json:
   docker-compose build --no-cache
   docker-compose up -d

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ› COMANDOS ÃšTILES DE DIAGNÃ“STICO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VER LOGS EN TIEMPO REAL:
   docker-compose logs -f backend
   docker-compose logs -f frontend
   docker-compose logs -f mysql

VER ÃšLTIMAS 50 LÃNEAS:
   docker-compose logs backend --tail=50

ENTRAR AL CONTENEDOR:
   docker-compose exec backend bash
   docker-compose exec frontend sh

REINICIAR UN SERVICIO:
   docker-compose restart backend
   docker-compose restart frontend

DETENER TODO:
   docker-compose down

DETENER Y BORRAR VOLÃšMENES (âš ï¸  BORRA LA BD):
   docker-compose down -v

VERIFICAR ESTADO:
   docker-compose ps

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¡ URLS Y PUERTOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Backend API:          http://localhost:8000
Frontend:             http://localhost:5173
WebSocket (Reverb):   ws://localhost:8080/app/176084
MySQL:                localhost:3306

CREDENCIALES POR DEFECTO:
- Admin:    admin@laboratorio.com / admin12345
- Lab:      lab@laboratorio.com / lab12345
- Doctor:   (crear desde panel admin)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ NOTAS IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… La base de datos se crea automÃ¡ticamente con Docker (no manual)
âœ… Los datos de MySQL persisten en ./mysql_data (no se pierden al reiniciar)
âœ… En Windows, usar PowerShell para evitar problemas con rutas
âœ… Reverb (WebSocket) se inicia automÃ¡ticamente con el backend
âœ… Si cambias eventos/broadcasting, reinicia: docker-compose restart backend
âœ… Frontend se reconstruye automÃ¡ticamente en build (npm run build)

âš ï¸  Si tienes problemas con permisos en storage, vuelve a ejecutar el paso 5
âš ï¸  Si WebSocket no conecta, verifica que REVERB_HOST="0.0.0.0" en .env
âš ï¸  Si frontend no carga, verifica logs: docker-compose logs frontend
